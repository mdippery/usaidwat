#!/usr/bin/env ruby

require 'usaidwat'


def die(code=1)
  $stderr.puts "Usage: #{$0} <user>"
  exit code
end

die if $*.length != 1

reddit_user = USaidWat::RedditUser.new $*.first
comments = reddit_user.retrieve_comments
exit 2 unless comments
puts reddit_user.username
puts '-' * reddit_user.username.length
max_key = 1
comments.each { |c| max_key = c.first.length if c.first.length > max_key }
comments.each { |c| printf "%-*s  %s\n", max_key, c.first, c.last }
