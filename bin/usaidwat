#!/usr/bin/env ruby

require 'usaidwat'


class String
  def undent
    self.gsub(/^.{#{slice(/^ +/).length}}/, '')
  end
end


def die(code=1)
  $stderr.puts "usaidwat v#{USaidWat::VERSION}"
  $stderr.puts "Usage: #{File.basename $0} <subcommand> [options]"
  $stderr.puts "
    The most commonly used usaidwat commands are:
        list   Show user's last 100 comments for a given subreddit
        show   Show a specific comment from a user
        where  Show where a user posts most often.".undent
  exit code
end

die if $*.length < 1

subcommand = $*.shift
script = File.absolute_path $0
dir = File.dirname script
subcommand = File.join dir, "usaidwat-#{subcommand}"
die 2 unless File.exists? subcommand
exec subcommand, *$*
